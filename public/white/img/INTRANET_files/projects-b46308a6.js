self.System=self.System||(()=>{const t={},e={},n=t=>t.replace(/^.\/(\w+)-[a-f0-9]{8,}.js$/,"./$1.js"),o=window.customElements?Promise.resolve():new Promise((t,e)=>{const n=document.getElementById("js-conditional-compat");if(!(n instanceof HTMLScriptElement))return e(new Error("unable to load compat.js"));const o=setTimeout(()=>{e(new Error("timed out loading compat.js"))},1e4);n.onload=()=>{clearTimeout(o),t()},n.onerror=()=>{clearTimeout(o),e(new Error("network error loading compat.js"))},n.src=n.getAttribute("data-src")||"",n.removeAttribute("data-src")}),s={register(r,c){const i=n(`./${((document.currentScript||{}).src||"").split("?").shift().split("/").pop()}`),a={},l=c((t,e)=>e?a[t]=e:Object.assign(a,t),s),u=r.map((t,e)=>s.import(n(t)).then(l.setters[e]));u.unshift(o),t[i]=Promise.all(u).then(()=>(l.execute(),a)).catch(t=>{throw t.message=`evaluating module ${i}: ${t.message}`,t}),e[i]&&(e[i](t[i]),delete e[i])},import:n=>t[n]||(t[n]=new Promise((t,o)=>{const s=setTimeout(()=>{o(new Error(`could not resolve ${n}`))},1e4);e[n]=e=>{clearTimeout(s),t(e)}}))};return s})(),System.register(["./frameworks.js"],(function(){"use strict";var t,e,n,o,s,r,c,i,a,l,u,d,m,p,j,f,h,g,v,b,L,y,C,w,E,T,k,S,A,M,x,H,q,I,$,D,_,B,P,R;return{setters:[function(F){t=F.bh,e=F.d,n=F.q,o=F.b,s=F.f,r=F.I,c=F.N,i=F.w,a=F.ah,l=F.p,u=F.g,d=F.o,m=F.c,p=F.af,j=F.L,f=F.Y,h=F.aG,g=F.H,v=F.x,b=F.U,L=F.m,y=F.a9,C=F.aA,w=F.j,E=F.e,T=F.y,k=F.a3,S=F.Z,A=F.M,M=F.aM,x=F.X,H=F.at,q=F.P,I=F.s,$=F.bi,D=F.O,_=F.V,B=F.bj,P=F.n,R=F.W}],execute:function(){function F(t){const e=new WeakMap;for(const n of t)e.set(n,n.getBoundingClientRect());return e}async function K(e,n,o){const s=n.get(e),r=o.get(e);if(!s||!r)throw new Error("invariant: Must have old and new positions for the element to animate -- app/assets/modules/github/magic-move.js:18");const c=s.left-r.left,i=s.top-r.top;0===c&&0===i||(await t(),e.style.transform=`translateZ(0) translate(${c}px, ${i}px)`,e.style.transition="transform 0s",await t(),e.style.transform="",e.style.transition="transform 500ms",await new Promise(t=>e.addEventListener("transitionend",t,{once:!0})),e.style.transition="")}function U(t,e){const n=F(t),o=[];for(const s of t)o.push(K(s,e,n));return Promise.all(o)}let N;function W(t){if(!t)return;N&&clearTimeout(N);const e=n(document,".js-project-updated-message");e.textContent=t,e.classList.remove("d-none"),N=setTimeout((function(){e.textContent="",e.classList.add("d-none")}),3e3)}function O(t,e){const n=`column-${t.id}`,o=document.getElementById(n);if(o)return o;{const o=new r;return o.id=n,o.src=`${e}/${t.id}`,o}}function V(t,e){const n=`card-${t}`,o=document.getElementById(n);if(o)return o;{const o=new r;return o.id=n,o.src=`${e}/${t}`,o.onerror=function(){o.remove()},o}}function G(t,e){const o=e.querySelector(".js-project-column-automation-footer");if(!o)return;const s=n(o,".js-project-column-automation-summary");t.automation_summary&&t.purpose?(s.textContent=t.purpose,s.setAttribute("aria-label",t.automation_summary),o.classList.remove("d-none")):o.classList.add("d-none")}function J(t,e,o,s){t.setAttribute("data-column-id",e),t.setAttribute("data-column-name",o),t.href=`#column-${e}`,n(t,".js-column-nav-name").textContent=o;const r=n(t,".js-column-nav-card-count");r.textContent=s;const i=c(parseInt(s),"item");r.setAttribute("aria-label",`Contains ${s} ${i}`)}function X(t,e,o,s,r,c){const i=t.content.cloneNode(!0),a=n(i,".js-project-column-navigation-item",HTMLAnchorElement);a.classList.toggle("selected",c),J(a,o,s,r);const l=e.querySelectorAll(".js-project-column-navigation-item").length+1;n(i,".js-column-nav-index").textContent=l.toString(),e.appendChild(i)}function Z(t,e,n){const o=document.createDocumentFragment();for(const s of e)o.appendChild(n[s]);t.innerHTML="",t.appendChild(o)}const z=e((async function(t,e){W(e.message);const r=t.querySelectorAll(".js-project-column"),c=F(r),i=t.getAttribute("data-url")||"",a=t.getAttribute("data-columns-url")||"",l=t.getAttribute("data-cards-url")||"",u=e.state||await o(i);s(t,"will-update-project",u);const d=document.activeElement;if(function(t,e){const n=Array.from(t.querySelectorAll(".js-project-column")).map(t=>t.getAttribute("data-id"));return e.columns.map(t=>String(t.id)).join(",")!==n.join(",")}(t,u)){s(t,"will-update-project-columns");const e={},o=document.createDocumentFragment();for(const t of u.columns){const n=O(t,a),s=n.querySelector(".js-project-column-cards");s&&(e[s.id]=s.scrollTop),o.appendChild(n)}const i=t.querySelector(".js-new-project-column-container");i&&i.remove();const l=n(t,".js-new-column-blankslate");if(l.remove(),t.innerHTML="",t.appendChild(o),i){t.appendChild(i),n(i,".js-new-column-button").classList.toggle("d-none",0===u.columns.length)}t.appendChild(l),l.classList.toggle("d-none",u.columns.length>0),function(t){const e=document.querySelector(".js-project-column-nav");if(!e)return;const o=n(e,".js-column-nav-template",HTMLTemplateElement),s=e.scrollLeft;let r;for(const n of document.querySelectorAll(".js-project-column-navigation-item"))n.remove(),n.classList.contains("selected")&&(r=n.getAttribute("data-column-id"));for(const n of t)X(o,e,n.id.toString(),n.name,n.card_ids.length.toString(),r===n.id.toString());e.scrollLeft=s}(u.columns);for(const t in e){const n=document.getElementById(t);if(!(n instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/project-updater.js:256");n.scrollTop=e[t]}await U(r,c)}const m=t.querySelectorAll(".js-project-column-card"),p=F(m),j={};for(const n of u.columns)for(const t of n.card_ids)j[t]=V(t.toString(),l);for(const o of u.columns){const t=document.getElementById(`column-${o.id}`);if(!t||"INCLUDE-FRAGMENT"===t.tagName)return;const e=t.querySelector(".js-project-column-name");if(e){e.textContent=o.name;const n=t.querySelector(".js-project-column-name-field");n instanceof HTMLInputElement&&(n.value=o.name,n.setAttribute("value",o.name))}const s=t.querySelector(".js-column-card-count");s&&(s.textContent=o.card_ids.length.toString()),G(o,t),Z(n(t,".js-project-column-cards"),o.card_ids,j)}s(t,"update-project"),await U(m,p),d&&document.activeElement!==d&&d.focus()}),100);const Y=["assignee","author","is","label","milestone","repo","review","state","status","type","linked"],Q={pr:"issue"},tt=["issue","pr","note"],et=["assignee","label","milestone"],nt=/[^\s:]+:("(?:\\"|.)*?"|[^\s]*)|[^\s]+/g;function ot(t,e){let n=t[e];return n||(n={tokenFilters:[],matchIfMissing:!1},t[e]=n),n}function st(t,e,n){const o=t.tokenFilters.find(t=>t.token===e);o?o.negated=n:t.tokenFilters.push({token:e,negated:n}),t.matchIfMissing=!1}function rt(t,e){const n=`^-?${e}:\\s*"?(.*?)"?\\s*$`;return t.replace(new RegExp(n),"$1").replace(/\\(")/g,"$1")}function ct(t){const e=t.match(nt)||[],n={};for(const o of e){const t=Y.find(t=>o.match(new RegExp(`^-?${t}:.*`)));if(t){const s=rt(o,t);if(s.length>0){if(st(ot(n,t),s,o.startsWith("-")),"linked"!==t)continue;const r=Q[s],c=t=>t.some(t=>{const e=rt(t,"is");return t!==e&&tt.includes(e)});if(r&&!c(e)){st(ot(n,"is"),r,!1)}}}else{const t=et.find(t=>o===`no:${t}`);if(t)ot(n,t).matchIfMissing=!0;else if(o.length>0){st(ot(n,"title"),o,!1)}}}return n}let it,at;function lt(){return n(document,".js-card-filter-input",HTMLInputElement).value.trim().toLowerCase()}function ut(t,e){for(const o in e){const s=t.getAttribute(`data-card-${o}`)||"";let r=[];""!==s.trim()&&(r=JSON.parse(s));const c=e[o];if(c.matchIfMissing){if(r.length>0)return!1}else for(const t of c.tokenFilters)if("title"===o){if(!dt(t.token,r))return!1}else{if("linked"===o&&!Q[t.token])return!1;const e=(n=t.token,-1!==r.indexOf(n));if(t.negated){if(e&&r.length>0)return!1}else if(!e)return!1}}var n;return!0}function dt(t,e){return e.some(e=>e.startsWith(t))}function mt(){const t=lt();for(const e of document.querySelectorAll(".js-project-columns-container .js-project-column")){const o=n(e,".js-filtered-column-card-count");if(t.length>0){const t=e.querySelectorAll(".js-project-column-card:not(.d-none)").length;o.textContent=`${t.toString()} result${1!==t?"s":""}`}o.classList.toggle("d-none",0===t.length)}}function pt(t){const e=function(){const t=lt();return at!==t&&(at=t,it=ct(t)),it}();let n=ut(t,e);if(!n)for(const o of t.querySelectorAll(".js-issue-note, .js-issue-note-reference"))if(n=ut(o,e),n)break;t.classList.toggle("d-none",!n)}function jt(){const t=n(document,".js-card-filter-input",HTMLInputElement),e=lt();n(document,".js-card-filter-clear").classList.toggle("d-none",0===e.length),function(t,e){const n=new URL(window.location.href,window.location.origin),o=new URLSearchParams(n.search.slice(1));""===e?o.delete(t):o.set(t,e),n.search=o.toString(),i(a(),document.title,n.toString())}(t.name,e),function(t,e){for(const n of document.querySelectorAll(".js-project-fullscreen-link")){const o=new URL(n.getAttribute("href")||"",window.location.origin),s=new URLSearchParams(o.search.slice(1));""===e?s.delete(t):s.set(t,e),o.search=s.toString(),n.setAttribute("href",o.toString())}}(t.name,e)}function ft(){for(const t of document.querySelectorAll(".js-project-columns-container .js-project-column-card"))pt(t);mt(),jt()}const ht=/:"[^"]*"?$/,gt=/(^|\s+)[^\s:]+$/,vt=/^(\s|$)/;function bt(t){!function(t){if(document.activeElement!==t)return!1;const e=t.value.slice(0,t.selectionEnd),n=t.value.slice(t.selectionEnd),o=0===t.value.trim().length;if(ht.test(e))return!1;const s=gt.test(e)&&vt.test(n);return o||s}(t)?Ct():function(t){const e=document.querySelector(".js-card-filter-suggester");if(e instanceof HTMLElement){e.classList.add("js-active-navigation-container"),e.classList.remove("d-none");const o=(t.value.slice(0,t.selectionEnd).match(yt)||[])[0],s=n(e,".js-card-filter-suggester-helper-container"),r=n(s,".js-card-filter-suggester-helper");Lt.test(t.value)?(r.textContent=t.value,s.classList.remove("d-none")):s.classList.add("d-none");const c=n(e,".js-card-filter-suggestions-header");let i=!1;for(const t of e.querySelectorAll(".js-card-filter-suggestion")){const e=t.getAttribute("data-value");e&&e.startsWith(o)?(t.classList.remove("d-none"),i=!0):t.classList.add("d-none")}c.classList.toggle("d-none",!i)}}(t)}const Lt=/(^|\s)[^\s:]+$/,yt=/\S*$/;function Ct(){const t=document.querySelector(".js-card-filter-suggester");t instanceof HTMLElement&&(t.classList.remove("js-active-navigation-container"),t.classList.add("d-none"))}function wt(t){const e=n(document,".js-card-filter-input",HTMLInputElement),o=e.value;let s=t,r=!0;o.indexOf(s)>=0?(r=!1,s=o.replace(s,"")):o.length&&(s=`${o.trim()} ${s}`),e.value=s,function(t,e){for(const n of document.querySelectorAll(".js-card-filter[data-card-filter]"))n.getAttribute("data-card-filter")===e&&n.setAttribute("aria-pressed",t.toString())}(r,t),ft()}const Et=!navigator.userAgent.match(/Macintosh/);function Tt(t){switch(t){case" ":return"Space";case"ArrowUp":case"k":case"K":return"up";case"ArrowDown":case"j":case"J":return"down";case"ArrowLeft":case"h":case"H":return"left";case"ArrowRight":case"l":case"L":return"right";case"Enter":return"confirm";case"Escape":return"cancel";default:return t}}class kt{constructor(t,e){this.item=t,this.onDone=e,this.moved=!1,this.moveInProgress=!1,this.blurring=!1,this.blurListener=this.handleBlur.bind(this),this.item.addEventListener("blur",this.blurListener),this.item.classList.add("moving")}handleBlur(t){!this.moveInProgress&&t.relatedTarget&&(this.blurring=!0,this.cancel())}isMetaKeyPressed(t){return Et?t.ctrlKey:t.metaKey}inPendingColumn(){return null!=this.item.closest(".js-project-pending-cards")}findColumn(t){return t?document.querySelector(`.js-project-column[data-id="${t}"]`):null}findCard(t){if(!t)return null;let e=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`);return e||(e=document.querySelector(`.js-project-column-card[data-content-id="${t}"]`)),e}isColumn(t){return null!=t&&t.classList.contains("js-project-column")}getColumn(){return this.item.closest(".js-project-column")}getPane(){return this.item.closest(".js-project-pane")}getColumnName(){const t=this.getColumn(),e=t&&t.querySelector(".js-project-column-name");return e?e.textContent:""}getColumnsContainer(){return n(document,".js-project-columns-container")}getNextColumn(){const t=this.getColumn();if(t){const e=t.nextElementSibling;if(this.isColumn(e))return e}}getPreviousColumn(){const t=this.getColumn();if(t){const e=t.previousElementSibling;if(this.isColumn(e))return e}}getFirstColumn(){return this.getColumnsContainer().querySelector(".js-project-column")}getLastColumn(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return t[t.length-1]}getCardID(t){return t&&(t.getAttribute("data-card-id")||t.getAttribute("data-content-id"))||""}getColumnID(t){return t&&t.getAttribute("data-id")||""}isMoving(t){return t===this.item}updateAriaLabel(){}moveTransaction(t){try{this.moveInProgress=!0,t(this.item),this.blurring||(this.updateAriaLabel(),this.item.focus())}finally{this.moved=!0,this.moveInProgress=!1}}done(){this.item.removeEventListener("blur",this.blurListener),this.item.classList.remove("moving"),this.item.removeAttribute("aria-label"),this.onDone()}cancel(){}}class St extends kt{constructor(t,e,n){super(t,n),this.moveCard=e,this.pendingCard=this.inPendingColumn(),this.getPane()&&(this.paneColumnCards=t.closest(".js-project-column-cards")),this.columnID=this.getColumnID(this.getColumn()),this.previousCardID=this.getCardID(t.previousElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateStartListener=this.handleUpdateStart.bind(this),this.getColumnsContainer().addEventListener("will-update-project",this.updateStartListener),this.updateEndListener=this.handleUpdateEnd.bind(this),this.getColumnsContainer().addEventListener("update-project",this.updateEndListener)}updateAriaLabel(){const t=this.getCardIndex(),e=t>=0?`to position ${t+1} of ${this.getCardCount()}`:"",n=`in ${this.getColumnName()} column`;this.item.setAttribute("aria-label",`Moved card ${e} ${n}`.trim())}handleUpdateStart(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:230");const e=this.getColumn();if(!e)return void this.done();if(!this.paneColumnCards&&!this.updatePreviousPosition(t.detail))return void this.done();const n=this.getColumnID(e);this.isColumnInState(t.detail,n)?this.updateSnapshot={columnID:n,indexInColumn:this.getCardIndex()}:this.done()}handleUpdateEnd(){const t=this.updateSnapshot;if(this.updateSnapshot=null,!t||!this.getColumn())return void this.done();const e=this.findCard(this.getCardID(this.item)),n=this.getColumnCards(this.findColumn(t.columnID));if(e&&n){this.moveToColumn(n);const o=n.children[t.indexInColumn];e!==o&&this.moveToBeforeCard(n,o)}}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(Tt(t.key)){case"up":e?this.moveToTop():this.moveUp(),t.preventDefault();break;case"down":e?this.moveToBottom():this.moveDown(),t.preventDefault();break;case"left":e?this.moveToFirstColumn(t.shiftKey):this.moveLeft(t.shiftKey),t.preventDefault();break;case"right":e?this.moveToLastColumn(t.shiftKey):this.moveRight(t.shiftKey),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}updatePreviousPosition(t){if(!t||!t.columns)return!1;const e=this.getCardID(this.item);for(const n of t.columns)for(let t=0;t<n.card_ids.length;t++)if(e===n.card_ids[t].toString())return this.previousCardID=n.card_ids[t-1].toString(),this.columnID=n.id.toString(),!0;return!1}isColumnInState(t,e){if(!t||!t.columns)return!1;for(const n of t.columns)if(e===n.id.toString())return!0;return!1}getCardIndex(){const t=this.getColumnCards(this.getColumn());return t?Array.from(t.children).indexOf(this.item):-1}getCardCount(){const t=this.getColumnCards(this.getColumn());return t?t.querySelectorAll(".js-project-column-card").length:0}getColumnCards(t){return null!=t?t.querySelector(".js-project-column-cards"):null}moveToBeforeCard(t,e){this.moveTransaction((function(n){t.insertBefore(n,e)}))}moveToColumn(t){this.moveTransaction((function(e){t.appendChild(e)}))}moveUp(){const t=this.item.previousElementSibling,e=this.getColumnCards(this.getColumn());t&&e&&this.moveToBeforeCard(e,t)}moveToTop(){const t=this.getColumnCards(this.getColumn());t&&this.moveTransaction((function(e){t.prepend(e)}))}moveDown(){const t=this.item.nextElementSibling,e=this.getColumnCards(this.getColumn());if(t&&e){const n=t.nextElementSibling;n?this.moveToBeforeCard(e,n):this.moveToBottom()}else this.moveToBottom()}moveToBottom(){const t=this.getColumnCards(this.getColumn());t&&this.moveToColumn(t)}moveToFirstColumn(t){const e=this.getColumnCards(this.getFirstColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveToLastColumn(t){const e=this.getColumnCards(this.getLastColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveLeft(t){const e=this.getColumnCards(this.getPane()?this.getLastColumn():this.getPreviousColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveRight(t){const e=this.getColumnCards(this.getNextColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project",this.updateStartListener),this.getColumnsContainer().removeEventListener("update-project",this.updateEndListener)}confirm(){if(this.moved){let t=this.findColumn(this.columnID);this.pendingCard&&!t&&(t=document.querySelector(".js-project-pending-cards-container.js-project-column")),this.moveCard(this.item,t,{keyboardMove:!0})}this.done()}cancel(){let t,e;if(this.moved)if(this.previousCardID){const n=this.findCard(this.previousCardID);n&&(t=n.closest(".js-project-column-cards"),e=n.nextElementSibling)}else this.columnID?(t=this.getColumnCards(this.findColumn(this.columnID)),t&&(e=t.firstElementChild)):this.paneColumnCards&&(t=this.paneColumnCards,e=t.firstElementChild);t&&(e?this.moveToBeforeCard(t,e):this.moveToColumn(t)),this.done()}}class At extends kt{constructor(t,e,n){super(t,n),this.moveColumn=e,this.nextColumnID=this.getColumnID(t.nextElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateListener=this.done.bind(this),this.getColumnsContainer().addEventListener("will-update-project-columns",this.updateListener)}updateAriaLabel(){const t=this.getColumnIndex(),e=t>=0?`to position ${t+1} of ${this.getColumnCount()}`:"";this.item.setAttribute("aria-label",`Moved ${this.getColumnName()} column ${e}`.trim())}getColumnIndex(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return Array.from(t).indexOf(this.item)}getColumnCount(){return this.getColumnsContainer().querySelectorAll(".js-project-column").length}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(Tt(t.key)){case"left":e?this.moveToFirstColumn():this.moveLeft(),t.preventDefault();break;case"right":e?this.moveToLastColumn():this.moveRight(),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}insertBefore(t){const e=this.getColumnsContainer();this.moveTransaction((function(n){e.insertBefore(n,t)}))}moveLeft(){const t=this.getPreviousColumn();t&&this.insertBefore(t)}moveRight(){const t=this.getNextColumn();if(t){const e=t.nextElementSibling;e&&this.isColumn(e)?this.insertBefore(e):this.moveToLastColumn()}else this.moveToLastColumn()}moveToFirstColumn(){const t=this.getFirstColumn();t&&this.insertBefore(t)}moveToLastColumn(){const t=this.getLastColumn();if(t){const e=t.nextElementSibling;e&&this.insertBefore(e)}}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project-columns",this.updateListener)}confirm(){this.moved&&this.moveColumn(this.item,{keyboardMove:!0}),this.done()}cancel(){if(this.moved){const t=this.findColumn(this.nextColumnID);t?this.insertBefore(t):this.moveToLastColumn()}this.done()}}let Mt;const xt=document.querySelector(".js-client-uid");function Ht(t,e){v(t,(async function(t,n,o){try{await e(t,n,o)}catch(s){throw s.response&&await It("project-update-error"),s}}))}function qt(t){w(t,"details-dialog",$).toggle(!1)}async function It(t,e){const o=n(document,`#${t}`,HTMLTemplateElement),s=await b({content:o.content.cloneNode(!0),dialogClass:"project-dialog"});return e&&e.setAttribute("aria-expanded","true"),s.addEventListener("dialog:remove",(function(){e&&e.setAttribute("aria-expanded","false")}),{once:!0}),s}function $t(t,e){const o=n(t,".js-column-card-count"),s=parseInt(o.textContent.trim()),r=t.getAttribute("data-id");let i,a=s+e;0===e&&(a=0),o.textContent=a.toString(),r&&(i=n(document,`.js-project-column-navigation-item[data-column-id="${r}"] .js-column-nav-card-count`),i.textContent=a.toString());const l=`Contains ${a} ${c(a,"item")}`;o.setAttribute("aria-label",l),i&&i.setAttribute("aria-label",l)}function Dt(t,e){const n=D(t,"keyboard_move");e&&!0===e.keyboardMove?n.value="true":n.value=""}function _t(t,e,o){e&&(!function(t){t.classList.contains("js-project-pending-cards-container")&&0===t.querySelectorAll(".js-project-column-card").length&&t.remove()}(e),$t(e,-1));const s=t.closest(".js-project-column");if(!s)return;const r=u(s,"data-id");t.setAttribute("data-column-id",r),$t(s,1),function(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelector(".js-search-cards-next-page");if(e instanceof HTMLInputElement){null==t.querySelector(".js-project-column-card")&&(e.value="1")}}}();const c=n(s,".js-project-content-form",HTMLFormElement);c.reset(),function(t,e){const n=D(t,"card_id"),o=D(t,"content_id"),s=D(t,"content_type");if(!e)return n.value="",o.value="",void(s.value="");const r=e.getAttribute("data-card-id");r?(n.value=r,o.value="",s.value=""):(n.value="",o.value=u(e,"data-content-id"),s.value=u(e,"data-content-type")),D(t,"client_uid").value=Mt}(c,t);const i=t.previousElementSibling,a=D(c,"previous_card_id");a.value=i?u(i,"data-card-id"):"",Dt(c,o),L(c)}function Bt(t){const e=t.item;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:217");if(e.closest(".js-project-triage-pane"))return;const n=t.from;_t(e,n&&n.closest(".js-project-column")),e.focus()}function Pt(t){const e=t.closest(".js-project-column");e&&$t(e,-1),t.remove()}xt&&(Mt=u(xt,"data-uid"));const Rt=/^#card-(\d+)$/;function Ft(t,e){const o=n(document,".js-reorder-columns-form",HTMLFormElement);D(o,"column_id").value=u(t,"data-id");const s=t.previousElementSibling,r=D(o,"previous_column_id");r.value=s?u(s,"data-id"):"",Dt(o,e),L(o)}function Kt(t){if(t.related&&!t.related.matches(".js-project-column"))return!1}function Ut(t){const e=t.item;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:287");Ft(e),e.focus()}function Nt(){const t=document.querySelector(".js-project-search-form");t instanceof HTMLFormElement&&L(t)}function Wt(){const t=document.querySelector(".js-project-archived-cards-search-form");t instanceof HTMLFormElement&&L(t)}function Ot(t,e,n){let o;return t&&(o=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`)),!o&&e&&n&&(o=document.querySelector(`.js-project-column-card[data-content-type="${n}"][data-content-id="${e}"]`)),o}var Vt,Gt;function Jt(t){const e=n(document,".js-new-project-column-container"),o=n(document,".js-new-column-blankslate"),s=n(e,".js-new-column-button");o.classList.toggle("d-none",!t),s.classList.toggle("d-none",t),t&&Xt(".js-project-triage-pane",!1)}function Xt(t,e){for(const n of document.querySelectorAll(".js-project-header, .js-project-columns, .js-project-pane, .js-project-small-footer"))n.classList.toggle("hide-sm",e);for(const n of document.querySelectorAll(".js-project-columns"))n.classList.toggle("push-board-over",e);for(const n of document.querySelectorAll(t))n.classList.toggle("d-none",!e),n.classList.toggle("hide-sm",!e)}function Zt(t){const e=document.querySelector(".js-project-archived-cards-results");if(e){const n=u(e,"data-project-archived-cards-url"),o=new URL(n,window.location.origin),s=new URLSearchParams(o.search.slice(1));t&&s.append("card_id",t),o.search=s.toString(),e.setAttribute("src",o.toString())}}function zt(t,e){n(document,".js-show-triage-field",HTMLInputElement).value=e?"show":"",Nt()}function Yt(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelectorAll(".js-project-column-card"),n={};for(const t of e){const e=t.getAttribute("id");e&&(n.hasOwnProperty(e)&&t.remove(),n[e]=!0)}}}function Qt(t){const e=t.closest(".js-details-container");e&&e.classList.remove("open","Details--on")}function te(t){if(!(t instanceof KeyboardEvent))throw new Error("invariant: app/assets/modules/github/projects.js:838");if("Escape"===k(t)){if(!(t.currentTarget instanceof Element))throw new Error("invariant: app/assets/modules/github/projects.js:841");Qt(t.currentTarget)}}function ee(t){const e=t.closest(".js-project-column");if(!e)return;const o=t.value;if(t.setAttribute("data-preview-text",o),/(gh-|issues\/|pull\/|projects\/|discussions\/|#)\d+/.test(o)){const t=n(e,".js-preview-note-form",HTMLFormElement);D(t,"note").value=o,L(t)}else n(e,".js-note-preview").innerHTML=""}function ne(t){B(t);const e=n(t,".js-task-list-field",HTMLTextAreaElement);e.defaultValue=e.value;for(const n of E(t,".task-list-item-checkbox",HTMLInputElement))n.defaultChecked=n.checked}d("change",".js-toggle-linked-repo-scope",(function(t){const e=t.currentTarget;if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/projects.js:326");const o=e.form;if(!o)throw new Error("invariant: app/assets/modules/github/projects.js:328");const s=n(o,".js-project-triage-search-text",HTMLInputElement),r=s.value||"";let c;c=e.checked?r.replace(/(\s|^)repo:[^\s]*\s*/gi,"$1").trim():`${r.trim()} repo:*`,c!==r&&(s.value=c,L(o))})),d("click",".js-project-show-all-archived-cards",Wt),Ht(".js-project-update-card",(async function(t,e){const o=await e.html(),s=n(o.html,"*"),r=Ot(s.getAttribute("data-card-id"),s.getAttribute("data-content-id"),s.getAttribute("data-content-type")),c=!(!r||r!==r.ownerDocument.activeElement);r&&r.replaceWith(s),c&&s.focus()})),Vt="project-clone-error",Gt=async function(t,e){const o=await e.json(),s=o.json.project_url,r=o.json.job_status_url;try{await y(r),window.location=s}catch(c){if(s){const t=await It("project-clone-partial-error");n(t,".js-cloned-board-link").setAttribute("href",s)}else await It("project-clone-error")}},v(".js-project-clone-form",(async function(t,e,o){const s=n(t,".form-actions"),r=n(t,".js-project-loader");s.classList.add("d-none"),r.classList.remove("d-none");try{await Gt(t,e,o)}catch(c){throw c.response&&await It(Vt),s.classList.remove("d-none"),r.classList.add("d-none"),c}})),Ht(".js-convert-note-to-issue-form",(async function(t,e){try{await e.text(),qt(t)}catch(o){if(!function(t){try{return t&&t.json&&"note_already_converted_to_issue"===t.json.error_code}catch(o){return!1}}(o.response))throw o;{const e=n(t,".js-convert-note-error-container");e.innerHTML="",e.append(C(document,o.response.json.error_html))}}})),Ht(".js-change-project-state-form",(async function(t,e){const n=document.activeElement;n&&t.contains(n)&&n.blur(),await e.text(),qt(t)})),d("click",".js-add-project-description",(async function(){const t=await It("edit-project");n(t,"#edit-project-name").removeAttribute("autofocus"),n(t,"#edit-project-body").setAttribute("autofocus","")})),d("click",".js-project-target-owner",(function(t){const e="repository"===u(t.currentTarget,"data-owner-type"),o=w(t.currentTarget,".js-project-clone-dialog");if(n(o,".js-project-clone-visibility").classList.toggle("d-none",e),e){n(o,".js-project-clone-private",HTMLInputElement).checked=!0}})),d("click",".js-refresh-project",(function(){window.location.reload()})),Ht(".js-create-project-column",(async function(t,e){const o=await e.html(),s=n(o.html,"*");if(s.classList.contains("js-column-form-container")){w(t,".js-column-form-container").replaceWith(s),se()}else{n(document,".js-new-project-column-container").before(o.html),qt(t),function(t){const e=document.querySelector(".js-project-column-nav");e&&X(n(e,".js-column-nav-template",HTMLTemplateElement),e,t.getAttribute("data-id")||"",n(t,".js-project-column-name").textContent,n(t,".js-column-card-count").textContent,!0)}(s);const e=s.getAttribute("data-id");e&&(le(e),ae(e),ue()),n(document,".js-new-column-blankslate").classList.contains("d-none")||Jt(!1)}})),Ht(".js-update-project-column",(async function(t,e){const o=await e.html(),s=n(o.html,"*");if(s.classList.contains("js-column-form-container")){w(t,".js-column-form-container").replaceWith(s),se()}else{const e=u(t,"data-column-id");n(document,`.js-project-column[data-id="${e}"]`).replaceWith(s),function(t){const e=t.getAttribute("data-id");if(!e)return;const o=document.querySelector(`.js-project-column-navigation-item[data-column-id="${e}"]`);if(o instanceof HTMLAnchorElement){J(o,e,n(t,".js-project-column-name").textContent,n(t,".js-column-card-count").textContent)}}(s),qt(t)}})),Ht(".js-delete-project-column",(async function(t,e){await e.text();const o=u(t,"data-column-id"),s=E(document,".js-project-column",HTMLElement);n(document,`.js-project-column[data-id="${o}"]`).remove(),qt(t),function(t){for(const e of document.querySelectorAll(".js-project-column-navigation-item"))if(t===e.getAttribute("data-column-id"))return void e.remove()}(o),1===s.length&&Jt(!0)})),Ht(".js-archive-project-column",(async function(t,e){await e.text();const o=u(t,"data-column-id");!function(t){n(t,".js-project-column-cards").innerHTML="",$t(t,0)}(n(document,`.js-project-column[data-id="${o}"]`)),qt(t)})),m(".js-project-column-card, .js-project-column",{constructor:HTMLElement,initialize(t){t.id===document.location.hash.substr(1)&&setTimeout(()=>{document.querySelector(".js-project-page-mobile")||t.focus()},1)}}),Ht(".js-remove-card-after-request",(async function(t,e){await e.text(),Pt(w(t,".js-project-column-card")),Nt()})),Ht(".js-archive-project-card",(async function(t,e){Pt(w(t,".js-project-column-card")),await e.text(),Wt()})),Ht(".js-unarchive-project-card",(async function(t,e){const n=w(t,".js-project-column-card"),o=u(n,"data-column-id"),s=document.querySelector(`.js-project-column[data-id="${o}"] .js-project-column-cards`);s&&(s.append(n),_t(n),n.focus()),e.text()})),Ht(".js-project-archived-cards-search-form",(async function(t,e){const o=w(t,".js-project-archived-cards-pane"),s=n(o,".js-project-column-cards");let r;s.textContent="Loading…",t.classList.add("loading");try{r=await e.html()}catch(c){}s.innerHTML="",r&&s.append(r.html),t.classList.remove("loading")})),p((async function({target:t}){if(t instanceof HTMLElement)t.matches(".js-project-column-card")?t.focus():t.matches(".js-project-column")&&(le(u(t,"data-id")),ue());else if(document.location.hash.length>0){const t=function(){const t=document.location.hash.match(Rt);return t?t[1]:null}();if(null!=t){const n=document.querySelector(".js-project-archived-cards-pane");if(n){const o=u(n,"data-project-archived-card-url");let s;try{s=await T(o.replace("{card_id}",t))}catch(e){}null!=s&&(Zt(t),Xt(".js-project-archived-cards-pane",!0))}}}})),d("click",".js-show-project-triage",(function(){Xt(".js-project-pane",!1),Xt(".js-project-menu-pane",!0),Xt(".js-project-triage-pane",!0);const t=n(document,".js-project-triage-pane");t.addEventListener("animationend",(function(){n(t,".js-project-triage-search-text",HTMLInputElement).focus()}),{once:!0})})),d("click",".js-show-archived-cards",(function(){Zt(),Xt(".js-project-pane",!1),Xt(".js-project-menu-pane",!0),Xt(".js-project-archived-cards-pane",!0)})),d("click",".js-show-project-menu",(function(){!function(){const t=document.querySelector(".js-project-activity-results");if(t){const e=u(t,"data-project-activity-url"),n=new URL(e,window.location.origin);t.setAttribute("src",n.toString())}}(),Xt(".js-project-pane",!1),Xt(".js-project-menu-pane",!0)})),d("click",".js-hide-project-menu",(function(){Xt(".js-project-pane",!1)})),d("click",".js-show-triage",(function(t){zt(0,!0)})),d("click",".js-hide-triage",(function(t){zt(0,!1)})),Ht(".js-project-search-form",(async function(t,e){if(function(t){const e=t.querySelector(".js-toggle-linked-repo-scope"),o=n(t,".js-project-triage-search-text",HTMLInputElement);return!!(e instanceof HTMLInputElement&&e.checked)&&function(t,e){return null!=ct(t)[e]}(o.value,"repo")}(t)){n(t,".js-toggle-linked-repo-scope",HTMLInputElement).checked=!1}t.classList.add("loading");const o=await e.html(),s=w(t,".js-project-triage-pane"),r=n(s,".js-project-search-results");r.innerHTML="",r.append(o.html),t.classList.remove("loading")})),Ht(".js-project-activity-form",(async function(t,e){const n=await e.html(),o=w(t,".js-project-activity-pane"),s=o.querySelector(".js-project-activity-container");if(s){if(!(s instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:781");s.innerHTML="",s.append(n.html)}if(o){if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:787");o.classList.remove("Details--on")}})),m(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=u(t,"data-content-type"),n=u(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),m(".js-more-search-cards-form",{subscribe:t=>j(t,"page:loaded",Yt)}),d("click",".js-dismiss-note-form-button",(function(t){Qt(t.currentTarget)})),l(".js-note-text",(function(t){const e=t;if(!(e instanceof HTMLTextAreaElement))throw new Error("invariant: app/assets/modules/github/projects.js:867");f(e,ee),e.addEventListener("blur",(function(){S(e,ee)}),{once:!0})})),m(".js-project-note-form",{subscribe:t=>j(t,"keyup",te)}),Ht(".js-preview-note-form",(async function(t,e){const o=w(t,".js-project-column"),s=n(o,".js-note-text",HTMLTextAreaElement),r=n(o,".js-note-preview");let c;try{c=(await e.html()).html}catch(i){}r.innerHTML="",c&&s.getAttribute("data-preview-text")===s.value&&r.appendChild(c)})),d("tab-container-changed",".js-project-picker-tabs",(async function(t){if(!(t instanceof CustomEvent))return;const e=t.currentTarget,o=n(e,"remote-input",_);o.setAttribute("aria-owns",t.detail.relatedTarget.id),o.src=u(t.detail.relatedTarget,"data-filter-url")})),Ht(".js-project-note-form",(async function(t,e){const o=n(t,"textarea",HTMLTextAreaElement);o.disabled=!0;const s=n(t,"button",HTMLButtonElement);s.disabled=!0;const r=t.closest(".js-project-column");if(r){n(r,".js-note-text").removeAttribute("data-preview-text")}let c;try{c=await e.html()}catch(i){if(c=i.response,r&&c&&409===c.status&&c.html){const t=n(r,".js-note-preview");t.innerHTML="",t.appendChild(c.html)}return c&&422===c.status&&await It("project-update-error"),s.disabled=!1,o.blur(),o.disabled=!1,void o.focus()}if(r){n(r,".js-note-preview").innerHTML="",function(t,e){n(t,".js-project-column-cards").prepend(e),$t(t,1)}(r,c.html)}else!function(t,e){const n=e.querySelector("*");if(!n||!n.classList.contains("js-note-form-container")){const n=u(t,"data-card-id"),o=document.getElementById(`card-${n}`);o&&o.replaceWith(e),t.reset(),qt(t)}else w(t,".js-note-form-container").replaceWith(e)}(t,c.html);o.blur(),o.disabled=!1,A(o,""),o.focus()})),Ht(".js-project-column-card .js-comment-update",(async function(t,e,o){const s=w(t,".js-task-list-container"),r=w(t,".js-project-column-card"),c=u(t,"data-note-version");let i;o.headers.set("X-Note-Version",c);try{i=await e.json()}catch(d){if(i=d.response,i&&422===i.status&&i.json.stale)return W(i.json.message),ne(s),void M(r);throw d}t.setAttribute("data-note-version",i.json.note_version);const a=i.json.note;n(s,".js-task-list-field",HTMLTextAreaElement).value=a;const l=n(r,".js-edit-note-template",HTMLTemplateElement);n(l.content,".js-edit-note-input",HTMLTextAreaElement).textContent=a,ne(s)}));const oe=e((function(){mt(),jt()}),1);async function se(t){const e=document.querySelector(".js-project-column-automation");if(!e)return;const o=w(e,".js-column-settings-form"),s=n(e,".js-project-automation-options",r),c=n(o,".js-project-autmoation-loader"),i=n(o,".js-column-purpose-details"),a=t||u(e,"data-src");function l(t){i.hidden=t,c.hidden=!t}s.src=a,s.addEventListener("loadstart",()=>l(!0)),s.addEventListener("loadend",()=>l(!1))}function re(t){return t.matches(".js-drag-by-handle")?"position-fixed":null}function ce(t){return t.matches(".js-drag-by-handle")?".js-project-dragger":null}function ie(){let t;if(document.location.hash.startsWith("#column-")&&(t=document.getElementById(document.location.hash.substr(1))),t||(t=document.querySelector(".js-project-column")),t){const e=t.getAttribute("data-id");e&&(le(e),ue())}}function ae(t){if(!document.querySelector(".js-project-page-mobile"))return;const e=document.createElement("a");e.href=`#column-${t}`,i(null,"",e.href)}function le(t){for(const e of document.querySelectorAll(".js-project-column"))e.classList.toggle("hide-sm",t!==e.getAttribute("data-id")),t===e.getAttribute("data-id")?e.setAttribute("data-active-column",""):e.removeAttribute("data-active-column");for(const e of document.querySelectorAll(".js-project-column-navigation-item"))e.classList.toggle("selected",t===e.getAttribute("data-column-id"))}function ue(){const t=document.querySelector(".js-project-column-navigation-item.selected");if(!t)return;const e=w(t,".js-project-column-nav"),n=t.offsetLeft,o=t.offsetWidth,s=n+o,r=window.innerWidth;(s-e.scrollLeft>r||s<e.scrollLeft)&&(e.scrollLeft=n-r/2+o/2)}function de(){const t=n(document,".js-project-issue-body-wrapper"),e=n(document,".js-project-issue-body-container"),o=t.getBoundingClientRect().height,s=e.getBoundingClientRect().height>o;n(document,".js-project-issue-body-blur").classList.toggle("d-none",!s),n(document,".js-project-issue-body-details-target").classList.toggle("d-none",!s)}async function me(t,e){const o=document.querySelector(".js-project-card-details-pane");if(!o)return!1;const s=u(t,"href"),r=n(o,".js-project-card-details"),c=t.closest(".js-project-pane"),i=null!=c;if(Xt(".js-project-card-details-pane",!0),n(o,".js-project-card-details-header").classList.toggle("d-none",!i),c&&function(t,e){const o=n(t,".js-project-card-details-back-template",HTMLTemplateElement).content.cloneNode(!0),s=u(e,"data-back-to-label"),r=u(e,"data-back-to-class");n(o,".js-project-card-details-back-to-title").textContent=s,n(o,".js-project-card-details-back-link").classList.add(r);const c=n(t,".js-project-card-details-back-container");c.innerHTML="",c.appendChild(o)}(o,c),s===r.getAttribute("data-issue-url"))return void(e&&pe());const a=function(t,e){const o=w(t,".js-project-issue-details-container"),s=n(document,".js-project-card-details-loader-template",HTMLTemplateElement).content.cloneNode(!0),r=n(o,".js-issue-octicon",SVGElement).classList.contains("open");n(s,".js-issue-title").textContent=t.textContent,n(s,".js-issue-number").textContent=n(o,".js-issue-number").textContent,n(s,".js-issue-state").textContent=r?"Close":"Reopen";const c=u(t,"data-content-label");for(const n of E(s,".js-issue-type"))n.textContent=c;for(const n of E(s,".js-project-card-details-external-link"))n.setAttribute("href",t.getAttribute("href")||"#"),n.setAttribute("data-ga-click",`Project board, go to ${c}, location:sidebar`);n(s,".js-hide-project-menu").classList.toggle("d-none",e);const i=n(s,".js-issue-repository");i.textContent=u(t,"data-content-repo-label"),i.setAttribute("href",t.getAttribute("data-content-repo-url")||"#");const a=n(s,".js-project-card-details-loader-octicon");return a.innerHTML="",a.appendChild(n(o,".js-issue-octicon",Element).cloneNode(!0)),s}(t,i);let l;r.innerHTML="",r.appendChild(a),r.setAttribute("data-issue-url",s);try{l=await P(document,`${s}/show_from_project`)}catch(d){return void function(t,e){n(t,".js-project-card-details-error").classList.remove("d-none"),n(t,".js-project-card-details-loader").classList.add("d-none"),n(t,".js-project-card-details-retry").addEventListener("click",(function(){t.removeAttribute("data-issue-url"),me(e,!1)}),{once:!0})}(r,t)}if(r.getAttribute("data-issue-url")===s){const t=l.querySelector(".js-hide-project-menu");t&&t.classList.toggle("d-none",i),r.innerHTML="",r.appendChild(l),de(),e&&pe()}}function pe(){const t=document.querySelector(".js-project-card-details-pane");t&&n(t,".js-project-card-details-external-link").focus()}function je(t){if("d"!==t.key)return;const e=t.currentTarget;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:1671");const n=e.querySelectorAll(".js-project-card-issue-link");1===n.length&&(me(n[0],!0),t.preventDefault())}function fe(){const t=n(document,".js-project-create-linked-repo-list"),e=n(t,".js-blankslate"),o=n(document,".js-project-create-linked-repo-search-input-group"),s=n(document,".js-project-create-linked-repo-max"),r=E(t,".js-project-repo-link-badge").length,c=r>=parseInt(s.getAttribute("data-max"),10);o.classList.toggle("d-none",c),s.classList.toggle("d-none",!c),e.classList.toggle("d-none",r>0)}d("click",".js-card-filter-clear",(function(){const t=n(document,".js-card-filter-input",HTMLInputElement);t.value="",s(t,"input")})),d("change",".js-column-purpose-value",(function(t){if(!(t.currentTarget instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/projects.js:1041");se(u(t.currentTarget,"data-preset-url"))})),m(".project-dialog .js-project-column-automation",(function(){se()})),m(".js-project-column-card",{constructor:HTMLElement,add(t){pt(t),oe()},remove:oe}),m(".js-card-filter-input",{constructor:HTMLInputElement,add(t){t.addEventListener("input",e(ft,500)),f(t,(function(){bt(t)}))}}),d("focusin",".js-card-filter-input",(function(t){t.currentTarget instanceof HTMLInputElement&&bt(t.currentTarget)})),d("focusout:delay",".js-card-filter-input",(function(){Ct()})),d("click",".js-card-filter-suggestion",(function(){n(document,".js-card-filter-input",HTMLInputElement).focus()})),d("click",".js-card-filter",(function(t){const e=t.currentTarget.getAttribute("data-card-filter");e&&wt(e)})),d("navigation:keydown",".js-card-filter-suggester",(function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1112");switch(k(t.detail.originalEvent)){case"Escape":t.preventDefault(),Ct();break;case"ArrowLeft":case"ArrowRight":case"Enter":Ct()}})),d("navigation:open",".js-card-filter-suggester",(function(t){const e=document.querySelector(".js-card-filter-input");if(e instanceof HTMLInputElement){const o=n(document,".js-card-filter-suggester"),r=u(t.target,"data-value"),c=e.value.slice(0,e.selectionEnd).replace(/\S+$/,""),i=e.value.slice(e.selectionEnd);o.classList.contains("d-none")||(t.preventDefault(),e.value=c+r+i,s(e,"input"),bt(e)),Ct()}})),d("socket:message",".js-project-columns-container",(async function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1163");const e=t.detail.data;if(!function(t){const e=t.currentTarget;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:1154");const n=t.detail.name,o=e.getAttribute("data-channel");return/^projects:\d+$/.test(n)&&n!==o}(t))if(Mt!==e.client_uid){const n=t.currentTarget;Nt(),Wt(),await x(),z(n,e)}else"column_automation_updated"===e.action&&null!=e.state&&function(t){for(const e of t.columns){const t=document.getElementById(`column-${e.id}`);t&&G(e,t)}}(e.state)})),document.addEventListener("socket:message",(function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1181");const{data:e,name:o}=t.detail;if(e&&e.locked&&function(){const t=document.querySelector(".js-project-lock-container");if(t){const e=n(t,".Popover"),o=e.classList.contains("d-none");if(e.classList.toggle("d-none",!0),!o){const e=document.activeElement;if(t.contains(e)){const t=document.querySelector(".js-project-header");t&&t.focus()}}}}(),e&&e.is_project_activity){const t=document.querySelector(".js-project-activity-pane");t&&t.classList.add("Details--on")}o&&o.startsWith("projects:metadata:")&&(document.title=e.name)})),m(".js-project-columns-drag-container",{constructor:HTMLElement,add(t){h.create(t,{animation:150,draggable:".js-project-column",filter:".js-note-text, .js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:re(t),handle:ce(t),handleReplacedDragElement:!0,group:{name:"project-column",put:!1,pull:!1},onMove:Kt,onUpdate:Ut})}}),m(".js-card-drag-container",{constructor:HTMLElement,add(t){h.create(t,{animation:150,draggable:".js-project-column-card",filter:".js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:re(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:ce(t),handleReplacedDragElement:!0,group:"project-card",onAdd:Bt,onUpdate:Bt})}}),m(".js-project-search-results-drag-container",{constructor:HTMLElement,add(t){h.create(t,{sort:!1,animation:150,draggable:".js-project-column-card",fallbackClass:re(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:ce(t),group:{name:"project-card",put:!1,pull:!0},onAdd:Bt,onUpdate:Bt})}}),m(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=u(t,"data-content-type"),n=u(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),m(".js-client-uid-field",{constructor:HTMLInputElement,add(t){t.value=Mt}}),m(".js-project-column[data-active-column]",{remove(){document.querySelector(".js-project-column[data-active-column]")||ie()}}),d("click",".js-project-column-navigation-item",(function(t){t.preventDefault();const e=u(t.currentTarget,"data-column-id");le(e),ae(e)})),d("click",".js-open-active-column-dialog",(function(t){const e=document.querySelector(".js-project-column[data-active-column]");if(e){const n=u(e,"data-id");It(`${u(t.currentTarget,"data-dialog-prefix")}-${n}`)}})),d("click",".js-toggle-project-edit-mode",(function(t){if(t.currentTarget.classList.toggle("selected"),!document.body)throw new Error("invariant: app/assets/modules/github/projects.js:1400");document.body.classList.toggle("project-edit-mode")})),d("click",".js-move-card-to-column-button",(function(t){const e=t.currentTarget.getAttribute("data-card-id"),n=t.currentTarget.getAttribute("data-content-id"),o=t.currentTarget.getAttribute("data-content-type"),s=u(t.currentTarget,"data-column-id"),r=Ot(e,n,o),c=document.querySelector(`.js-project-column[data-id="${s}"] .js-project-column-cards`);if(r&&c){t.currentTarget.hasAttribute("data-change-active-column")&&(le(s),ae(s),ue());const e=r.closest(".js-project-column");c.prepend(r),_t(r,e)}})),d("click",".js-add-note-button",(function(t){t.preventDefault();const e=document.querySelector(".js-project-column[data-active-column] .js-add-note-container .js-details-target");e&&H(e)})),d("click",".js-project-lock-info-button, .js-close-project-lock-popover",(function(){const t=n(document,".js-project-lock-container .Popover"),e=t.classList.contains("d-none");t.classList.toggle("d-none",!e)})),R((function(t){t.matches(".js-project-card-details-pane .js-comment .js-comment-update")&&de()})),d("click",".js-hide-project-card-details",(function(){const t=n(document,".js-project-card-details");t.removeAttribute("data-issue-url"),t.innerHTML=""})),l(".js-project-column-card",(function(t){t.addEventListener("keydown",je),t.addEventListener("blur",(function(){t.removeEventListener("keydown",je)}),{once:!0})})),d("click",".js-project-card-issue-link",(function(t){if(!(t instanceof MouseEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1702");(function(t){return!t.metaKey&&(!t.ctrlKey&&(!t.altKey&&(!t.shiftKey&&0===t.button)))})(t)&&(me(t.currentTarget,!1),t.preventDefault())})),Ht(".js-project-card-issue-details-title",(async function(t,e){const o=w(t,".js-details-container"),s=await e.json();H(o),null!=s.json.issue_title&&(n(o,".js-issue-title").textContent=s.json.issue_title);for(const n of t.elements)(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement)&&(n.defaultValue=n.value)})),d("auto-complete-change",".js-project-create-repo-link-auto-complete",(function({target:t}){if(!(t instanceof q))throw new Error("invariant: app/assets/modules/github/projects.js:1751");const e=t.querySelector(`.js-project-repo-link-badge[data-repo-name="${t.value}"]`);if(!e)return;const o=n(document,".js-project-create-linked-repo-list"),s=n(e,".js-repo-id",HTMLInputElement);let r=!1;for(const n of E(o,".js-repo-id",HTMLInputElement))if(n.value===s.value){r=!0;break}r||(s.disabled=!1,o.append(e),e.classList.remove("d-none")),t.value="",fe()})),d("click",".js-remove-project-repo-link",(function(t){w(t.target,".js-project-repo-link-badge").remove(),fe()})),g("keydown",".js-project-create-linked-repo-search",(function(t){"Enter"===t.key&&t.preventDefault()})),d("click",".js-project-dialog-button",(function({currentTarget:t}){It(u(t,"data-dialog-id"),t)})),d("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){w(t,".js-project-column-card").focus()})),d("click",".js-project-active-column-dialog-button",(async function({currentTarget:t}){const e=u(t,"data-dialog-id");!function(t,e){const o=n(t,".js-move-card-to-column-dialog-body"),s=w(e,".js-project-column-card"),r=s.closest(".js-project-column"),c=r&&r.getAttribute("data-id"),i=n(document,"#move-card-to-column-button-template",HTMLTemplateElement),a=n(t,".js-move-card-to-column-title");a.textContent=s.closest(".js-project-archived-cards-pane")?u(a,"data-restore-title"):u(a,"data-move-title"),o.innerHTML="";for(const l of document.querySelectorAll(".js-project-column-navigation-item")){const t=u(l,"data-column-id"),r=n(i.content.cloneNode(!0),".js-move-card-to-column-button",HTMLButtonElement);r.setAttribute("data-card-id",u(s,"data-card-id")),r.setAttribute("data-content-id",u(s,"data-content-id")),r.setAttribute("data-content-type",u(s,"data-content-type")),r.setAttribute("data-column-id",t),e.hasAttribute("data-change-active-column")&&r.setAttribute("data-change-active-column",""),r.textContent=u(l,"data-column-name"),r.disabled=null!=c&&t===c,o.appendChild(r)}}(await It(e,t),t)})),d("details-menu-select",".js-project-change-state-sync-menu",(function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1815");const e=w(t.detail.relatedTarget,".js-project-change-state-sync-menu-parent"),o=n(t.detail.relatedTarget,"[data-menu-button-text]").textContent.trim();n(e,".js-project-change-state-sync-menu-button").textContent=o}),{capture:!0}),d("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){const e=!1===w(t,".Details-element").hasAttribute("open"),n=e?"data-linked-pr-hmac-expanded":"data-linked-pr-hmac-collapsed",o=t.getAttribute(n)||"",s=e?"data-linked-pr-expanded":"data-linked-pr-collapsed",r=t.getAttribute(s)||"";I({hydroEventPayload:r,hydroEventHmac:o,hydroClientContext:""},!0)})),function(t,e){let n,o;function s(e){if(n)return;const o=e.currentTarget;if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:704");switch(Tt(e.key)){case"confirm":case"Space":if(o.classList.contains("js-redacted-project-column-card"))return;if(!o.classList.contains("js-keyboard-movable"))return;n=new St(o,t,(function(){n=null})),e.preventDefault();break;case"up":{const t=o.previousElementSibling;if(t&&t.classList.contains("js-project-column-card")){if(!(t instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:724");t.focus(),e.preventDefault()}else{const t=o.closest(".js-project-column");t instanceof HTMLElement&&(t.focus(),e.preventDefault())}break}case"down":{const t=o.nextElementSibling;if(t&&t.classList.contains("js-project-column-card")){if(!(t instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:744");t.focus(),e.preventDefault()}break}}}function r(t){if(o)return;if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;const n=t.currentTarget;if(!(n instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:760");switch(Tt(t.key)){case"confirm":case"Space":if(!n.classList.contains("js-keyboard-movable"))return;o=new At(n,e,(function(){o=null})),t.preventDefault();break;case"down":{const e=n.querySelector(".js-project-column-card");e&&(e.focus(),t.preventDefault());break}case"left":{const e=n.previousElementSibling;if(e&&e.classList.contains("js-project-column")){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:790");e.focus(),t.preventDefault()}break}case"right":{const e=n.nextElementSibling;if(e&&e.classList.contains("js-project-column")){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:803");e.focus(),t.preventDefault()}break}}}l(".js-project-column-card",(function(t){if(n){if(n.isMoving(t))return;n.cancel()}t.addEventListener("keydown",s),t.addEventListener("blur",(function e(){n&&n.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",s))}))})),l(".js-project-column",(function(t){if(o){if(o.isMoving(t))return;o.cancel()}t.addEventListener("keydown",r),t.addEventListener("blur",(function e(){o&&o.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",r))}))}))}(_t,Ft),ie()}}}));
//# sourceMappingURL=projects-628e6aa6.js.map
